
# ğŸ¾ PetSpa - Plataforma SaaS de GestÃ£o para Petshops

<div align="center">
  <img src="https://img.shields.io/badge/React-18-blue?logo=react&style=for-the-badge" />
  <img src="https://img.shields.io/badge/TypeScript-5-blue?logo=typescript&style=for-the-badge" />
  <img src="https://img.shields.io/badge/Vite-5-purple?logo=vite&style=for-the-badge" />
  <img src="https://img.shields.io/badge/Supabase-PostgreSQL-green?logo=supabase&style=for-the-badge" />
</div>

<br />

Bem-vindo ao **PetSpa**, uma aplicaÃ§Ã£o web **PWA (Progressive Web App)** Mobile-First completa. O sistema gerencia agendamentos, assinaturas recorrentes (Clube VIP), fluxo de caixa e atendimento via Chatbot HÃ­brido.

---

## âœ¨ Funcionalidades

### ğŸ“± Cliente (App)
- **Agendamento Inteligente:** Wizard com validaÃ§Ã£o de horÃ¡rios, bloqueio de conflitos e slots automÃ¡ticos baseados na duraÃ§Ã£o do serviÃ§o.
- **Chatbot DeterminÃ­stico:** Assistente virtual (`bot-engine.ts`) que guia o usuÃ¡rio sem alucinaÃ§Ãµes de IA, permitindo agendamento via chat.
- **Clube de Assinaturas:** GestÃ£o de planos mensais (ex: 4 banhos/mÃªs) com agendamento automÃ¡tico.
- **GestÃ£o de Pets:** Cadastro detalhado com upload de fotos otimizado (compressÃ£o no cliente).
- **Acompanhamento em Tempo Real:** Status do banho (Aguardando -> No Banho -> Pronto).

### ğŸ›¡ï¸ Admin (Backoffice)
- **Dashboard Executivo:** KPIs de receita, ocupaÃ§Ã£o e serviÃ§os mais vendidos.
- **Agenda Visual:** Estilo Google Calendar com visualizaÃ§Ã£o semanal.
- **Kanban Operacional:** Controle de fluxo (Check-in / Banho / Check-out).
- **GestÃ£o de CatÃ¡logo:** CRUD de ServiÃ§os e Pacotes.

---

## ğŸ› ï¸ Como Duplicar e Rodar o Projeto

Para rodar este projeto em sua prÃ³pria infraestrutura, vocÃª precisarÃ¡ configurar o **Supabase** (Backend as a Service).

### 1. PrÃ©-requisitos
*   Node.js v18+
*   NPM ou Yarn
*   Conta no [Supabase](https://supabase.com) (Plano Gratuito funciona perfeitamente)

### 2. InstalaÃ§Ã£o Local

```bash
# 1. Clone o repositÃ³rio
git clone https://github.com/seu-usuario/petspa.git

# 2. Entre na pasta
cd petspa

# 3. Instale as dependÃªncias
npm install

# 4. Inicie o servidor de desenvolvimento
npm run dev
```

### 3. âš ï¸ ConfiguraÃ§Ã£o do Banco de Dados (Supabase)

Para o sistema funcionar, vocÃª deve criar um projeto no Supabase e rodar o seguinte script SQL no **SQL Editor** do painel do Supabase para criar a estrutura necessÃ¡ria:

```sql
-- 1. Tabela de Perfis (Estende auth.users)
create table public.profiles (
  id uuid references auth.users not null primary key,
  email text,
  full_name text,
  phone text,
  role text default 'client' check (role in ('client', 'admin', 'employee')),
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 2. Tabela de Pets
create table public.pets (
  id uuid default gen_random_uuid() primary key,
  owner_id uuid references public.profiles(id) not null,
  name text not null,
  breed text,
  weight numeric,
  birth_date date,
  notes text,
  avatar_url text, -- Armazena Base64 ou URL do Storage
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 3. Tabela de ServiÃ§os
create table public.services (
  id bigint generated by default as identity primary key,
  name text not null,
  description text,
  price numeric not null,
  duration_minutes integer default 60,
  active boolean default true,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 4. Tabela de Agendamentos
create table public.appointments (
  id bigint generated by default as identity primary key,
  client_id uuid references public.profiles(id) not null,
  pet_id uuid references public.pets(id) not null,
  service_id bigint references public.services(id) not null,
  start_time timestamp with time zone not null,
  end_time timestamp with time zone not null,
  status text default 'pending' check (status in ('pending', 'confirmed', 'in_progress', 'completed', 'cancelled')),
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 5. Pacotes / Assinaturas
create table public.packages (
  id bigint generated by default as identity primary key,
  title text not null,
  description text,
  price numeric not null,
  original_price numeric,
  bath_count integer default 4,
  features text[], -- Array de strings
  highlight boolean default false,
  color_theme text default '#9B59B6',
  service_id bigint references public.services(id), -- Vincula ao serviÃ§o base
  active boolean default true
);

create table public.subscriptions (
  id bigint generated by default as identity primary key,
  user_id uuid references public.profiles(id) not null,
  pet_id uuid references public.pets(id) not null,
  package_id bigint references public.packages(id) not null,
  status text default 'active',
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- TRIGGERS IMPORTANTES (Cria perfil ao registrar usuÃ¡rio)
create or replace function public.handle_new_user()
returns trigger as $$
begin
  insert into public.profiles (id, email, full_name, phone, role)
  values (new.id, new.email, new.raw_user_meta_data->>'full_name', new.raw_user_meta_data->>'phone', 'client');
  return new;
end;
$$ language plpgsql security definer;

create trigger on_auth_user_created
  after insert on auth.users
  for each row execute procedure public.handle_new_user();
```

> **Dica:** Lembre-se de desabilitar o RLS (Row Level Security) ou configurar as PolÃ­ticas de SeguranÃ§a adequadas para permitir leitura/escrita nas tabelas.

### 4. Conectando ao Frontend

1.  No painel do Supabase, vÃ¡ em **Project Settings > API**.
2.  Copie a `Project URL` e a `anon public key`.
3.  Abra o arquivo `src/lib/supabase.ts` e substitua as constantes (ou melhor, use variÃ¡veis de ambiente).

**Recomendado (Arquivo .env):**
Crie um arquivo `.env` na raiz do projeto:

```env
VITE_SUPABASE_URL=sua_url_do_projeto
VITE_SUPABASE_ANON_KEY=sua_chave_anonima
```

E atualize `src/lib/supabase.ts` para usar `import.meta.env.VITE_SUPABASE_URL`.

---

## ğŸ“‚ Estrutura do Projeto

```
## ğŸ“‚ Estrutura do Projeto

```
src/
â”œâ”€â”€ components/          # Componentes de UI (AtÃ´micos e Moleculares)
â”‚   â”œâ”€â”€ BookingWizard/   # Fluxo complexo de agendamento (Modularizado)
â”‚   â”œâ”€â”€ Admin.tsx        # Dashboard administrativo
â”‚   â”œâ”€â”€ Chat.tsx         # Interface de comunicaÃ§Ã£o em tempo real
â”‚   â””â”€â”€ Shared/          # Primitivos: Button, Input, Card, Modal, Header, Footer
â”œâ”€â”€ context/             # Gerenciamento de estado global (React Context API)
â”‚   â”œâ”€â”€ ToastContext.tsx # Sistema de notificaÃ§Ãµes push/UI feedback
â”‚   â”œâ”€â”€ AuthContext.tsx  # PersistÃªncia de sessÃ£o e RBAC
â”‚   â””â”€â”€ ThemeContext.tsx # Controle de design tokens (Light/Dark mode)
â”œâ”€â”€ services/            # Camada de infraestrutura e integraÃ§Ã£o externa
â”‚   â”œâ”€â”€ supabase.ts      # Cliente e queries do Banco de Dados/Auth
â”‚   â”œâ”€â”€ bot-engine.ts    # LÃ³gica de processamento de IA/Chatbot
â”‚   â””â”€â”€ analytics.ts     # Rastreamento de performance e conversÃ£o
â”œâ”€â”€ views/               # PÃ¡ginas principais (Containers de alto nÃ­vel)
â”œâ”€â”€ hooks/               # AbstraÃ§Ã£o de lÃ³gica de negÃ³cio e estados locais
â”œâ”€â”€ styles/              # Arquitetura CSS (Design System e VariÃ¡veis)
â”œâ”€â”€ utils/               # FunÃ§Ãµes puras, validadores e helpers de data
â”œâ”€â”€ types/               # DefiniÃ§Ãµes estritas de TypeScript (Interfaces/Models)
â”œâ”€â”€ App.tsx              # Orquestrador de rotas e providers
â””â”€â”€ main.tsx             # Ponto de entrada da aplicaÃ§Ã£o
```

## ğŸ¨ Design System

O projeto utiliza CSS puro organizado em mÃ³dulos (`styles/`) para garantir performance mÃ¡xima sem dependÃªncias pesadas de build, mas com variÃ¡veis CSS modernas para facilitar a customizaÃ§Ã£o de temas (Dark Mode ready).

*   **Cores:** Definidas em `src/styles/variables.css`.
*   **AnimaÃ§Ãµes:** `fade-in-up`, `pop-in` definidas em `src/styles/animations.css`.

## ğŸ¤– Bot Engine

O Chatbot localizado em `src/services/bot-engine.ts` **nÃ£o** usa LLMs (ChatGPT/Gemini) diretamente para o fluxo conversacional para garantir:
1.  **Custo Zero:** NÃ£o gasta tokens de API.
2.  **LatÃªncia Zero:** Resposta imediata.
3.  **SeguranÃ§a:** NÃ£o inventa horÃ¡rios ou preÃ§os (AlucinaÃ§Ã£o).

Ele funciona como uma mÃ¡quina de estados finita que navega o usuÃ¡rio pelo fluxo de agendamento.

---

## ğŸ“ LicenÃ§a

Este projeto Ã© de cÃ³digo aberto sob a licenÃ§a MIT. Sinta-se livre para usar, modificar e comercializar.
